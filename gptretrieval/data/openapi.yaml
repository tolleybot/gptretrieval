components:
  schemas:
    DocumentChunkMetadata:
      properties:
        author:
          title: Author
          type: string
        created_at:
          title: Created At
          type: string
        document_id:
          title: Document Id
          type: string
        source:
          $ref: "#/components/schemas/Source"
        source_id:
          title: Source Id
          type: string
        url:
          title: Url
          type: string
      title: DocumentChunkMetadata
      type: object
    DocumentChunkWithScore:
      properties:
        embedding:
          items:
            type: number
          title: Embedding
          type: array
        id:
          title: Id
          type: string
        metadata:
          $ref: "#/components/schemas/DocumentChunkMetadata"
        score:
          title: Score
          type: number
        text:
          title: Text
          type: string
      required:
        - text
        - metadata
        - score
      title: DocumentChunkWithScore
      type: object
    DocumentMetadataFilter:
      properties:
        author:
          title: Author
          type: string
        document_id:
          title: Document Id
          type: string
        end_date:
          title: End Date
          type: string
        source:
          $ref: "#/components/schemas/Source"
        source_id:
          title: Source Id
          type: string
        start_date:
          title: Start Date
          type: string
      title: DocumentMetadataFilter
      type: object
    HTTPValidationError:
      properties:
        detail:
          items:
            $ref: "#/components/schemas/ValidationError"
          title: Detail
          type: array
      title: HTTPValidationError
      type: object
    Query:
      properties:
        filter:
          $ref: "#/components/schemas/DocumentMetadataFilter"
        query:
          title: Query
          type: string
        top_k:
          default: 3
          title: Top K
          type: integer
      required:
        - query
      title: Query
      type: object
    QueryRequest:
      properties:
        queries:
          items:
            $ref: "#/components/schemas/Query"
          title: Queries
          type: array
      required:
        - queries
      title: QueryRequest
      type: object
    QueryResponse:
      properties:
        results:
          items:
            $ref: "#/components/schemas/QueryResult"
          title: Results
          type: array
      required:
        - results
      title: QueryResponse
      type: object
    QueryResult:
      properties:
        query:
          title: Query
          type: string
        results:
          items:
            $ref: "#/components/schemas/DocumentChunkWithScore"
          title: Results
          type: array
      required:
        - query
        - results
      title: QueryResult
      type: object
    Source:
      description: An enumeration.
      enum:
        - email
        - file
        - chat
      title: Source
      type: string
    ValidationError:
      properties:
        loc:
          items:
            anyOf:
              - type: string
              - type: integer
          title: Location
          type: array
        msg:
          title: Message
          type: string
        type:
          title: Error Type
          type: string
      required:
        - loc
        - msg
        - type
      title: ValidationError
      type: object
info:
  description:
    A retrieval API for querying and filtering documents based on natural
    language queries and metadata
  title: Retrieval Plugin API
  version: 1.0.0
openapi: 3.0.2
paths:
  /query:
    post:
      description:
        Accepts search query objects array each with query and optional
        filter. Break down complex questions into sub-questions. Refine results by
        criteria, e.g. time / source, don't do this often. Split queries if ResponseTooLargeError
        occurs.
      operationId: query_query_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/QueryRequest"
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/QueryResponse"
          description: Successful Response
        "422":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HTTPValidationError"
          description: Validation Error
      security:
        - HTTPBearer: []
      summary: Query
servers:
  - url: "https://9214-2601-140-9380-c710-909d-5fe9-7da5-4e56.ngrok-free.app"
